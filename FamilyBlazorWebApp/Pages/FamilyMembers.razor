@page "/FamilyMembers/{Id:int}"
@using Data
@using Models
@inject IFamilyData FamilyData
@inject NavigationManager NavigationManager


@if (familyMembersToShow == null)
{
    <em>Family members not found!!!</em>
}
else
{
    <br/>
    <div class="FamilyMemberBox">
        <table class="table">
            <thead>
            <tr>
                <th>Person ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Age</th>
                <th>Job Title</th>
                <th>Salary</th>
                <th>Sex</th>
                <th>Weight</th>
                <th>Height</th>
                <th>Hair Color</th>
                <th>Eye Color</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var adult in adults)
            {
                <tr>
                    <td>@adult.Id</td>
                    <td>@adult.FirstName</td>
                    <td>@adult.LastName</td>
                    <td>@adult.Age</td>
                    <td>@adult.JobTitle.JobTitle</td>
                    <td>@adult.JobTitle.Salary</td>
                    <td>@adult.Sex</td>
                    <td>@adult.Weight</td>
                    <td>@adult.Height</td>
                    <td>@adult.HairColor</td>
                    <td>@adult.EyeColor</td>
                </tr>
            }
            </tbody>
        </table>
    </div>
    <br/>
    <h3 style="color: white">Children</h3>
    <br/>
    <div class="FamilyMemberBox">
        <table class="table">
            <thead>
            <tr>
                <th>Person ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Age</th>
                <th>Sex</th>
                <th>Weight</th>
                <th>Height</th>
                <th>Hair Color</th>
                <th>Eye Color</th>
                <th>Type of Intrests</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var child in children)
            {
                <tr>
                    <td>@child.Id</td>
                    <td>@child.FirstName</td>
                    <td>@child.LastName</td>
                    <td>@child.Age</td>
                    <td>@child.Sex</td>
                    <td>@child.Weight</td>
                    <td>@child.Height</td>
                    <td>@child.HairColor</td>
                    <td>@child.EyeColor</td>
                    @foreach (var intr in interests)
                    {
                        <tr>
                            <td>@intr.Type</td>
                            <td>@intr.Description</td>
                        </tr>
                    }
                </tr>               
            }
            </tbody>
        </table>
    </div>
    <br/>
    <h3 style="color:white;">Pets</h3>
    <br/>
    <div class="FamilyMemberBox">
        <table class="table">
            <thead>
            <th>Pet Id</th>
            <th>Species</th>
            <th>Name</th>
            <th>Age</th>
            </thead>
            <tbody>
            <tr>
                @foreach (var p in pets)
                {
                    <td>@p.Id</td>
                    <td>@p.Species</td>
                    <td>@p.Name</td>
                    <td>@p.Age</td>
                }
            </tr>
            </tbody>
        </table>
    </div>
    
}

@code
{
    [Parameter]
    public int Id { get; set; }

    private IList<Adult> adults { get; set; }
    private IList<Child> children { get; set; }
    private IList<Pet> pets { get; set; }
    private IList<Interest> interests { get; set; }

    private Family familyMembersToShow = new Family(){Adults = new List<Adult>(), Children = new List<Child>(), Pets = new List<Pet>()};

    protected override async Task OnInitializedAsync()
    {
        familyMembersToShow = FamilyData.Get(Id);
        adults = familyMembersToShow.Adults;
        children = familyMembersToShow.Children;
        pets = familyMembersToShow.Pets;
        @foreach (var  c in children)
        {
            interests = c.Interests;
            pets = c.Pets;
        }
    }
}
